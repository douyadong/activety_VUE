<?php require_once("../public/global.php")?>
<?php
	$config = array(
		"imgs"=>array(array(
			"url" => "03_h5_01.jpg",
			"original-demesion" => "[750,628]",
			"shapes" => '[[498,560,146,61,"javascript:showDialog()"]]'
		),array(
			"url" => "03_h5_02.jpg",
			"original-demesion" => "[750,946]",
			"shapes" => '[[85,593,582,356,"http://m.wkzf.com/shanghai/xfdetail/c0e1f04866474879.html"]]'
		),array(
			"url" => "03_h5_03.jpg",
			"original-demesion" => "[750,237]",
			"shapes" => '[[427,114,200,60,"javascript:reserve(0)"]]'
		),array(
			"url" => "03_h5_04.jpg",
			"original-demesion" => "[750,373]",
			"shapes" => '[[85,21,582,356,"http://m.wkzf.com/nantong/xfdetail/0a6e9962f8f20d14.html"]]'
		),array(
			"url" => "03_h5_05.jpg",
			"original-demesion" => "[750,239]",
			"shapes" => '[[430,114,200,60,"javascript:reserve(1)"]]'
		),array(
			"url" => "03_h5_06.jpg",
			"original-demesion" => "[750,371]",
			"shapes" => '[[85,21,582,356,"http://m.wkzf.com/shanghai/xfdetail/0b64da93d4a7e7de.html"]]'
		),array(
			"url" => "03_h5_07.jpg",
			"original-demesion" => "[750,240]",
			"shapes" => '[[428,114,200,60,"javascript:reserve(2)"]]'
		),array(
			"url" => "03_h5_08.jpg",
			"original-demesion" => "[750,370]",
			"shapes" => '[[85,18,582,356,"http://m.wkzf.com/shanghai/xfdetail/8d3b63c51a256471.html"]]'
		),array(
			"url" => "03_h5_09.jpg",
			"original-demesion" => "[750,271]",
			"shapes" => '[[427,114,200,60,"javascript:reserve(3)"]]'
		),array(
			"url" => "03_h5_10.jpg",
			"original-demesion" => "[750,737]",
			"shapes" => '[[85,384,582,356,"http://m.wkzf.com/shanghai/xfdetail/a43eeafb6fcf0ead.html"]]'
		),array(
			"url" => "03_h5_11.jpg",
			"original-demesion" => "[750,236]",
			"shapes" => '[[429,114,200,60,"javascript:reserve(4)"]]'
		),array(
			"url" => "03_h5_12.jpg",
			"original-demesion" => "[750,373]",
			"shapes" => '[[84,21,582,356,"http://m.wkzf.com/shanghai/xfdetail/949476d3b6f66d34.html"]]'
		),array(
			"url" => "03_h5_13.jpg",
			"original-demesion" => "[750,237]",
			"shapes" => '[[428,114,200,60,"javascript:reserve(5)"]]'
		),array(
			"url" => "03_h5_14.jpg",
			"original-demesion" => "[750,373]",
			"shapes" => '[[84,21,582,356,"http://m.wkzf.com/nantong/xfdetail/1d18c86f54fa5c7f.html"]]'
		),array(
			"url" => "03_h5_15.jpg",
			"original-demesion" => "[750,238]",
			"shapes" => '[[428,114,200,60,"javascript:reserve(6)"]]'
		),array(
			"url" => "03_h5_16.jpg",
			"original-demesion" => "[750,373]",
			"shapes" => '[[84,21,582,356,"http://m.wkzf.com/wuxi/xfdetail/4d01269ed77ff482.html"]]'
		),array(
			"url" => "03_h5_17.jpg",
			"original-demesion" => "[750,295]",
			"shapes" => '[[426,114,200,60,"javascript:reserve(7)"]]'
		),array(
			"url" => "03_h5_18.jpg",
			"original-demesion" => "[750,736]",
			"shapes" => '[[85,382,582,356,"http://m.wkzf.com/shanghai/xfdetail/382da159d75ae02c.html"]]'
		),array(
			"url" => "03_h5_19.jpg",
			"original-demesion" => "[750,239]",
			"shapes" => '[[428,114,200,60,"javascript:reserve(8)"]]'
		),array(
			"url" => "03_h5_20.jpg",
			"original-demesion" => "[750,370]",
			"shapes" => '[[85,21,582,356,"http://m.wkzf.com/shanghai/xfdetail/3ab567a2f1c64d66.html"]]'
		),array(
			"url" => "03_h5_21.jpg",
			"original-demesion" => "[750,241]",
			"shapes" => '[[427,114,200,60,"javascript:reserve(9)"]]'
		),array(
			"url" => "03_h5_22.jpg",
			"original-demesion" => "[750,370]",
			"shapes" => '[[85,21,582,356,"http://m.wkzf.com/shanghai/xfdetail/7c1cc51f13a1fd5b.html"]]'
		),array(
			"url" => "03_h5_23.jpg",
			"original-demesion" => "[750,241]",
			"shapes" => '[[427,114,200,60,"javascript:reserve(10)"]]'
		),array(
			"url" => "03_h5_24.jpg",
			"original-demesion" => "[750,370]",
			"shapes" => '[[85,21,582,356,"http://m.wkzf.com/shanghai/xfdetail/8acc32f4f1fdc714.html"]]'
		),array(
			"url" => "03_h5_25.jpg",
			"original-demesion" => "[750,295]",
			"shapes" => '[[427,114,200,60,"javascript:reserve(11)"]]'
		),array(
			"url" => "03_h5_26.jpg",
			"original-demesion" => "[750,737]",
			"shapes" => '[[85,385,582,356,"http://m.wkzf.com/shanghai/xfdetail/65061edd0af64dd7.html"]]'
		),array(
			"url" => "03_h5_27.jpg",
			"original-demesion" => "[750,239]",
			"shapes" => '[[427,114,200,60,"javascript:reserve(12)"]]'
		),array(
			"url" => "03_h5_28.jpg",
			"original-demesion" => "[750,370]",
			"shapes" => '[[85,21,582,356,"http://m.wkzf.com/shanghai/xfdetail/52ca2e3ac3c3d09e.html"]]'
		),array(
			"url" => "03_h5_29.jpg",
			"original-demesion" => "[750,241]",
			"shapes" => '[[427,114,200,60,"javascript:reserve(13)"]]'
		),array(
			"url" => "03_h5_30.jpg",
			"original-demesion" => "[750,370]",
			"shapes" => '[[85,21,582,356,"http://m.wkzf.com/shanghai/xfdetail/f2311b7eeb1c8667.html"]]'
		),array(
			"url" => "03_h5_31.jpg",
			"original-demesion" => "[750,241]",
			"shapes" => '[[427,114,200,60,"javascript:reserve(14)"]]'
		),array(
			"url" => "03_h5_32.jpg",
			"original-demesion" => "[750,370]",
			"shapes" => '[[85,21,582,356,"http://m.wkzf.com/shanghai/xfdetail/cd01836967482a33.html"]]'
		),array(
			"url" => "03_h5_33.jpg",
			"original-demesion" => "[750,289]",
			"shapes" => '[[427,114,200,60,"javascript:reserve(15)"]]'
		),array(
			"url" => "03_h5_34.jpg",
			"original-demesion" => "[750,727]",
			"shapes" => '[[85,375,582,356,"http://m.wkzf.com/shanghai/xfdetail/45655e7dd4892fc7.html"]]'
		),array(
			"url" => "03_h5_35.jpg",
			"original-demesion" => "[750,241]",
			"shapes" => '[[427,114,200,60,"javascript:reserve(16)"]]'
		),array(
			"url" => "03_h5_36.jpg",
			"original-demesion" => "[750,370]",
			"shapes" => '[[85,21,582,356,"http://m.wkzf.com/shanghai/xfdetail/8ae4aefde14e0631.html"]]'
		),array(
			"url" => "03_h5_37.jpg",
			"original-demesion" => "[750,205]",
			"shapes" => '[[427,114,200,60,"javascript:reserve(17)"]]'
		),array(
			"url" => "03_h5_38.jpg",
			"original-demesion" => "[750,370]",
			"shapes" => '[[85,21,582,356,"http://m.wkzf.com/shanghai/xfdetail/6184566c84c53459.html"]]'
		),array(
			"url" => "03_h5_39.jpg",
			"original-demesion" => "[750,241]",
			"shapes" => '[[427,114,200,60,"javascript:reserve(18)"]]'
		),array(
			"url" => "03_h5_40.jpg",
			"original-demesion" => "[750,370]",
			"shapes" => '[[85,21,582,356,"http://m.wkzf.com/shanghai/xfdetail/e4385f01fcf32c79.html"]]'
		),array(
			"url" => "03_h5_41.jpg",
			"original-demesion" => "[750,334]",
			"shapes" => '[[427,114,200,60,"javascript:reserve(19)"]]'
		)));
?>
<!doctype html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta charset="utf8">
		<link rel="stylesheet" type="text/css" href="../public/css/alwap.min.css"></link>
		<style type="text/css">
			img{
				width:100%;
				margin-top:-.3rem;
				border:0;
			}
			body{
				margin:0;
				padding:0;
			}
		</style>
		<script src="../config.js">

		</script>
		<script src="../public/js/app.min.js">

		</script>
		<script src="../public/js/activitylist/wap.min.js">

		</script>
		<script>
		function MaxController(){
			//WapController.call(this);		
		}
		MaxController.prototype = new WapController();
		MaxController.prototype.showReverseDialog = function(estateId,estateName){
			$('.reserve-form').data('id',estateId);
			$('.reserve-form').data('name',estateName);
			$('.reserve-form').show();
		};

		var controller = new MaxController();
		var estates = [{
			estateId:"153191",
			estateName:"新西塘孔雀城"
		},{
			estateId:"155712",
			estateName:"华润置地橡树湾"
		},{
			estateId:"155079",
			estateName:"四季香榭"
		},{
			estateId:"155079",
			estateName:"赞成名仕府邸"
		},


		{
			estateId:"155856",
			estateName:"山景水岸"
		},{
			estateId:"155715",
			estateName:"名城花苑"
		},{
			estateId:"155765",
			estateName:"名都豪庭"
		},{
			estateId:"155259",
			estateName:"无锡田园东方"
		},
		//大品牌
		{
			estateId:"153101",
			estateName:"保利西塘越"
		},{
			estateId:"155706",
			estateName:"嘉兴万达广场"
		},{
			estateId:"154677",
			estateName:"中环国际公寓三期"
		},{
			estateId:"143689",
			estateName:"万科翡翠雅宾利"
		},
		//任性购
		{
			estateId:"153100",
			estateName:"智富城Mimon公寓"
		},{
			estateId:"144551",
			estateName:"MORE街区"
		},{
			estateId:"155623",
			estateName:"嘉兴尚海年华"
		},{
			estateId:"153093",
			estateName:"上影安吉新奇世界"
		},
		//地铁旁
		{
			estateId:"119211",
			estateName:"融创外滩188"
		},{
			estateId:"145298",
			estateName:"香溢花城三期香溢天地"
		},{
			estateId:"106565",
			estateName:"盛世滨江壹号公馆"
		},{
			estateId:"15973",
			estateName:"华润外滩九里"
		}];
		function reserve(index){			
			var estate = estates[index];
			var estateId = estate.estateId, estateName = estate.estateName;
			controller.showReverseDialog(estateId,estateName);
		}
		</script>
	</head>
	<body>
		<?php
			foreach ($config["imgs"] as $img) {
		?>
			<img src="<?php echo $CURRENT_STATIC_DOMAIN . '/' . $router['activity_name']; ?>/images/wap/<?php echo $img['url']?>" <?php echo empty($img["original-demesion"])?"":("data-original-demension='" . $img["original-demesion"] . "' data-shapes='" . $img["shapes"] . "'") ?> />
		<?php
			}
		?>	

		<div class="reserve-form">
	<div class="content">
		<h3>看房预约</h3>
		<div class="item">
			<label>姓名:</label> <input type="text" placeholder="请输入姓名" name="name" />
		</div>
		<div class="item">
			<label>电话:</label> <input type="text" placeholder="请输入电话号码" name="phoneNumber"/>
		</div>
		<div class="item">
			<label>验证码:</label> <input type="text" placeholder="请输入验证码" name="verifyCode" /><button class="sendCodeBtn" id="sendCodeBtn">获取验证码</button>
		</div>
		<p class="tips-txt"></p>
		<div class="footer">
			<button class="confirmReserveBtn">确认预约</button>
			<button class="cancelBtn">取消</button>
		</div>
	</div>
</div>

<div class="w-dialog success-dialog">
    <div class="w-alert-box success-box">
        <p class="text">看房预约</p>
        <p class="fz14">您的预约已成功，我们的新房顾问将马上与您联系!</p>
        <span id="closeSuccess" class="close-success">确   定</span>
    </div>
</div>	
	</body>	
	<script type="text/javascript">
		function createMap(){
	$('map').remove();//删除map元素
	$('img[data-original-demension').each(function(index,img){//遍历有data-original-demension的img元素
		//读取原始大小
		var $this = $(this);
		var $body = $('body');
		var originalDemesion = $this.data('original-demension');
		var originalWidth = originalDemesion[0];
		var originalHeight = originalDemesion[1];
		var currentWidth = $this.width();
		var currentHeight = $this.height();
		
		//读取热点信息
		var shapes = $this.data('shapes');
		var name = $this.attr('name') || ('img_original_demesion'+index);
		var mapName = "map_"+name;
		var $map = $('<map></map>');
		$map.attr('name',mapName);
		var x1,x2,y1,y2,href;
		var xRatio = currentWidth/originalWidth;
		var yRatio = currentHeight/originalHeight;
		$.each(shapes,function(j,shape){
			x1 = parseInt(shape[0] * xRatio);
			y1 = parseInt(shape[1] * yRatio);
			x2 = parseInt((shape[0]+shape[2]) * xRatio);
			y2 = parseInt((shape[1]+shape[3]) * yRatio);
			href = shape[4];
			$map.append($('<area shape="rect" coords="'+(x1+","+y1+","+x2+","+y2)+'" href="'+href+'"></area>'));
		});
		$body.append($map);
		$this.attr('usemap',"#"+mapName);
	});
}

	$(function(){		
		$(window).on('resize',createMap);
	});
	window.onload = createMap;

	</script>
</html>