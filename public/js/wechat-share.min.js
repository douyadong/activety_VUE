function WechatShareController(){this.title=$("#wechatTitle").val(),this.content=$("#wechatContent").val(),this.linkUrl=window.location.href,this.imgUrl="http:"+$("#wechatImgUrl").val(),this.environment=STAGE_ENVIRONENT,this.apiPrefix="//10.0.18.78:8134/",this.apiUrl="","test"===this.environment?this.apiPrefix="//10.0.18.79:8134/":"beta"===this.environment?this.apiPrefix="//wechat-beta.wkzf.com/":"sim"===this.environment?this.apiPrefix="//wechat-beta.wkzf.com/":"prod"===this.environment&&(this.apiPrefix="//wechat.wkzf.com/"),this.apiUrl=this.apiPrefix+"wx_js_sdk_sign.rest",this.wx_onMenuShareTimeline=function(e,n,i){wx.onMenuShareTimeline({title:e,link:n,imgUrl:i,trigger:function(e){},success:function(e){console.log("wx_onMenuShareTimeline success "+n)},cancel:function(e){},fail:function(e){}})},this.wx_onMenuShareAppMessage=function(e,n,i,t){wx.onMenuShareAppMessage({title:e,desc:i,link:n,imgUrl:t,type:"",dataUrl:"",success:function(){console.log("wx_onMenuShareAppMessage success "+n)},cancel:function(){}})},this.sendRequest=function(){$.ajax({url:this.apiUrl,type:"GET",data:{requestUrl:window.location.href},dataType:"jsonp",jsonpCallback:"callback",error:function(e){},success:function(e){var n=e.data;wx.config({debug:!1,appId:n.appid,timestamp:n.timestamp,nonceStr:n.nonce_str,signature:n.signature,jsApiList:["onMenuShareAppMessage","onMenuShareTimeline","chooseImage","uploadImage","previewImage"]}),window.wxConfigCallback&&window.wxConfigCallback(n)}})},this.onload=function(){var e=this;wx.ready(function(){wx.showOptionMenu(),e.wx_onMenuShareTimeline(e.title,e.linkUrl,e.imgUrl),e.wx_onMenuShareAppMessage(e.title,e.linkUrl,e.content,e.imgUrl)}),e.sendRequest()},this.onload()}$(document).ready(function(){new WechatShareController});