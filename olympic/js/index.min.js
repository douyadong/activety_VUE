function IndexController(){Controller.call(this),this.toastStatus=!0,this.initDialog(),this.bindEvent()}IndexController.prototype.initDialog=function(){var t=this;$("#sendCodeBtn").off("click").click(function(){if(t.allowed){var e={phoneNum:$.trim($("#custMobile").val()),msgSourceType:3};t.request(t.apiUrl.olympics.getPhoneVertifyCode,e,{type:"GET",process:function(){t.countDown()},onExceptionInterface:function(t){$(".tips-txt").text(t.message),setTimeout(function(){$(".tips-txt").text("")},2e3)}})}}),$("#sendBtn").off("click").click(function(){var e=$.trim($("#txtGolden").val()),o=$.trim($("#txtSilver").val()),i=$.trim($("#txtCopper").val()),n=$(".country-list table").find("td.active img").attr("data-id"),a={cusName:$.trim($("#custName").val()),cusPhone:$.trim($("#custMobile").val()),vertifyCode:$.trim($("#vertifyCode").val()),country:n,goldMedalCount:e,silverMedalCount:o,bronzeMedalCount:i};t.request(t.apiUrl.olympics.add,a,{type:"GET",process:function(e){t.showLog(e.message,function(){window.location.href=t.redirectUrl.olympics.detail+"?cusPhone="+a.cusPhone})},onExceptionInterface:function(e){"你已经猜过了哦"==e.message?t.showLog(e.message,function(){window.location.href=t.redirectUrl.olympics.detail+"?cusPhone="+a.cusPhone}):t.showLog(e.message)}})})},IndexController.prototype.displayDialog=function(t){t?($("#yyForm").hide(),$("html,body").css({overflow:"",height:"auto"})):($("#yyForm").show(),$("html,body").css({overflow:"hidden",height:"100%"}))},IndexController.prototype.bindEvent=function(){var t=this,e=$(".btnSubmit"),o=$('.country-list table tr:not(".medal") td');$('.country-list table tr:not(".medal")').find("td img").on("click",function(){var t=$(this);e.attr("data-id",t.attr("data-id")),o.removeClass("active"),t.parent().addClass("active")}),$(".btnSubmit").on("click",function(){var e=$(this),i=new RegExp("^[1-9]d*|0$"),n=$.trim($("#txtGolden").val()),a=$.trim($("#txtSilver").val()),s=$.trim($("#txtCopper").val());e.attr("data-id"),$.trim($("#custMobile").val());return 0==o.filter(".active").length?void t.showLog("请先选择一个国家！"):0==n.length||0==a.length||0==s.length?void t.showLog("金、银、铜都必须猜啦"):i.test(n)&&i.test(a)&&i.test(s)?parseInt(n)>999?void t.showLog("竞猜数不能超过999！"):parseInt(a)>999?void t.showLog("竞猜数不能超过999！"):parseInt(s)>999?void t.showLog("竞猜数不能超过999！"):void t.displayDialog():void t.showLog("竞猜数必须是整数！")}),/Android/gi.test(navigator.userAgent)&&window.addEventListener("resize",function(){"INPUT"!=document.activeElement.tagName&&"TEXTAREA"!=document.activeElement.tagName||window.setTimeout(function(){document.activeElement.scrollIntoViewIfNeeded()},0)})},IndexController.prototype.showLog=function(t,e){var o=this,i=navigator.userAgent;i.indexOf("Android")>-1||i.indexOf("Adr")>-1,i.indexOf("Linux")>-1;if(o.toastStatus){o.toastStatus=!1;var n=$(".wk-toast");n[0]||(n=$('<div class="wk-toast"></div>').appendTo("body")),n.html(t).addClass("show"),setTimeout(function(){n.remove(),o.toastStatus=!0,e&&e()},2400)}},$(document).ready(function(){new IndexController});