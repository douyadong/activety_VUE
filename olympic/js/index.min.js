function IndexController(){Controller.call(this),this.toastStatus=!0,this.initDialog(),this.bindEvent()}IndexController.prototype.initDialog=function(){var t=this;$("#sendCodeBtn").click(function(){if(t.allowed){var o={phoneNum:$.trim($("#custMobile").val()),msgSourceType:3};t.request(t.apiUrl.wechat.getPhoneVertifyCode,o,{type:"GET",process:function(){t.countDown()},onExceptionInterface:function(t){$(".tips-txt").text(t.message),setTimeout(function(){$(".tips-txt").text("")},2e3)}})}}),$("#sendBtn").click(function(){var o=$.trim($("#txtGolden").val()),e=$.trim($("#txtSilver").val()),i=$.trim($("#txtCopper").val()),n=$(".country-list table").find("td.active img").attr("data-id"),a={cusName:$.trim($("#custName").val()),cusMobile:$.trim($("#custMobile").val()),vertifyCode:$.trim($("#vertifyCode").val()),country:n,goldMedalCount:o,silverMedalCount:e,bronzeMedalCount:i};t.request(t.apiUrl.olympics.add,a,{type:"GET",process:function(){window.location.href=t.redirectUrl.olympics.detail+"?userId="+txtMobile},onExceptionInterface:function(o){t.showLog(o.message)}})})},IndexController.prototype.displayDialog=function(t){t?($("#yyForm").hide(),$("html,body").css({overflow:"",height:"auto"})):($("#yyForm").show(),$("html,body").css({overflow:"hidden",height:"100%"}))},IndexController.prototype.bindEvent=function(){var t=this,o=$(".btnSubmit"),e=$('.country-list table tr:not(".medal") td');$('.country-list table tr:not(".medal")').find("td img").on("click",function(){var t=$(this);o.attr("data-id",t.attr("data-id")),e.removeClass("active"),t.parent().addClass("active")}),$(".btnSubmit").on("click",function(){var o=$(this),i=new RegExp("^[1-9]d*|0$"),n=$.trim($("#txtGolden").val()),a=$.trim($("#txtSilver").val()),r=$.trim($("#txtCopper").val());o.attr("data-id"),$.trim($("#custMobile").val());return 0==e.filter(".active").length?void t.showLog("请先选择一个国家！"):0==r.length||0==a.length||0==r.length?void t.showLog("金、银、铜都必须猜啦"):i.test(n)&&i.test(a)&&i.test(r)?(parseInt(n)>999&&t.showLog("竞猜数必须是整数！"),parseInt(a)>999&&t.showLog("竞猜数必须是整数！"),parseInt(r)>999&&t.showLog("竞猜数必须是整数！"),void t.displayDialog()):void t.showLog("竞猜数必须是整数！")})},IndexController.prototype.showLog=function(t,o){var e=this;if(e.toastStatus){e.toastStatus=!1;var i=$(".wk-toast");i[0]||(i=$('<div class="wk-toast"></div>').appendTo("body")),i.html(t).addClass("show"),setTimeout(function(){i.removeClass("show"),e.toastStatus=!0,o&&o()},2400)}},$(document).ready(function(){new IndexController});