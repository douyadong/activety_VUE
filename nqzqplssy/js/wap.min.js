function wapController(){Controller.call(this),this.initPage(),this.bindEvent(),this.initSwiper()}wapController.prototype.initPage=function(){var e=this;e.CakePos=[],$(".turntable .cake").each(function(t,a){var i={key:t,bottom:$(a).css("bottom"),marginLeft:$(a).css("margin-left"),width:$(a).css("width"),height:$(a).css("height")};e.CakePos.push(i)});var t=function(){$(".turntable .item").animate({top:"45px"},1e3).animate({top:"70px"},1e3)};t(),si=setInterval(function(){t()},2e3)},wapController.prototype.createMask=function(){var e=document.documentElement.scrollHeight,t=document.documentElement.scrollWidth,a=document.createElement("div");a.id="mask-container",$(a).css({"background-color":"rgba(0,0,0,0.7)",position:"fixed",left:0,top:0,height:e+"px",width:t+"px","z-index":"9999"}),$(document.body).append(a)},wapController.prototype.initSwiper=function(){var e=this,t=$(".turntable")[0];Hammer(t).on("swipeleft",function(){$.each(e.CakePos,function(t,a){e.CakePos[t].key=e.CakePos[t].key-1<0?e.CakePos.length-1:e.CakePos[t].key-1});var t=e.CakePos[0];$(".turntable .cake").each(function(a,i){var n=$.map(e.CakePos,function(e,t){if(e.key==a)return e})[0];a==t.key&&($(".item .content img").attr({src:$(i).data("font-src")}),$(".item .content p").text($(i).data("desc")),$(".item").data("dialog",$(i).data("dialog"))),$(i).animate({bottom:n.bottom},{queue:!1,easing:"linear",duration:500}),$(i).animate({"margin-left":n.marginLeft},{queue:!1,easing:"linear",duration:500}),$(i).animate({width:n.width},{queue:!1,easing:"linear",duration:500}),$(i).animate({height:n.height},{queue:!1,easing:"linear",duration:500})});var a=$(".spot-list").find(".active"),i=a.next();a.removeClass("active"),i.length>0?i.addClass("active"):$(".spot-list span:first-child").addClass("active")}),Hammer(t).on("swiperight",function(){$.each(e.CakePos,function(t,a){e.CakePos[t].key=e.CakePos[t].key+1==e.CakePos.length?0:e.CakePos[t].key+1});var t=e.CakePos[0];$(".turntable .cake").each(function(a,i){var n=$.map(e.CakePos,function(e,t){if(e.key==a)return e})[0];a==t.key&&($(".item .content img").attr({src:$(i).data("font-src")}),$(".item .content p").text($(i).data("desc")),$(".item").data("dialog",$(i).data("dialog"))),$(i).animate({left:n.left},{queue:!1,easing:"linear",duration:500}),$(i).animate({bottom:n.bottom},{queue:!1,easing:"linear",duration:500}),$(i).animate({"margin-right":n.marginRight},{queue:!1,easing:"linear",duration:500}),$(i).animate({"margin-left":n.marginLeft},{queue:!1,easing:"linear",duration:500}),$(i).animate({width:n.width},{queue:!1,easing:"linear",duration:500}),$(i).animate({height:n.height},{queue:!1,easing:"linear",duration:500})});var a=$(".spot-list").find(".active"),i=a.prev();a.removeClass("active"),i.length>0?i.addClass("active"):$(".spot-list span:last-child").addClass("active")})},wapController.prototype.bindEvent=function(){var e=this;$(".item").on("click",function(t){t.preventDefault(),e.createMask(),$(".dialog").hide(),$("."+$(this).data("dialog")).show()}),$("body").delegate("#mask-container,.close","click",function(e){$(".dialog").hide(),$("#mask-container").remove()})},$(document).ready(function(){new wapController});