function WechatShareController(){this.title=$("#wechatTitle").val(),this.content=$("#wechatContent").val(),this.linkUrl=$("#wechatUrl").val(),this.imgUrl="http://hd.wkzf.com/christmas/images/wechat_shared.png",this.environment=STAGE_ENVIRONENT,this.apiPrefix="//10.0.18.78:8134/",this.apiUrl="","test"===this.environment?this.apiPrefix="//10.0.18.79:8134/":"beta"===this.environment?this.apiPrefix="//wechat-beta.wkzf.com/":"sim"===this.environment?this.apiPrefix="//wechat-beta.wkzf.com/":"prod"===this.environment&&(this.apiPrefix="//wechat.wkzf.com/"),this.apiUrl=this.apiPrefix+"wx_js_sdk_sign.rest",this.wx_onMenuShareTimeline=function(e,t,n){wx.onMenuShareTimeline({title:e,link:t,imgUrl:n,trigger:function(e){},success:function(e){},cancel:function(e){},fail:function(e){}})},this.wx_onMenuShareAppMessage=function(e,t,n,i){wx.onMenuShareAppMessage({title:e,desc:n,link:t,imgUrl:i,type:"",dataUrl:"",success:function(){},cancel:function(){}})},this.sendRequest=function(){$.ajax({url:this.apiUrl,type:"GET",data:{requestUrl:window.location.href},dataType:"jsonp",jsonpCallback:"callback",error:function(e){},success:function(e){var t=e.data;wx.config({debug:!1,appId:t.appid,timestamp:t.timestamp,nonceStr:t.nonce_str,signature:t.signature,jsApiList:["onMenuShareAppMessage","onMenuShareTimeline"]})}})},this.onload=function(){var e=this;wx.ready(function(){wx.showOptionMenu(),e.wx_onMenuShareTimeline(e.title,e.linkUrl,e.imgUrl),e.wx_onMenuShareAppMessage(e.title,e.linkUrl,e.content,e.imgUrl)}),e.sendRequest()},this.onload()}$(document).ready(function(){new WechatShareController});